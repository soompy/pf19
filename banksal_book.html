<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>뱅크샐러드 가계부</title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/banksalad.css" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://www.amcharts.com/lib/4/core.js"></script>
  <script src="https://www.amcharts.com/lib/4/charts.js"></script>
  <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
  <script src="js/banksal.js"></script>

  <script>
    am4core.ready(function () {

      // Themes begin
      am4core.useTheme(am4themes_animated);
      // Themes end

      /**
       * Define data for each year
       */
      var chartData = {
        "1995": [
          { "sector": "Agriculture", "size": 6.6 },
          { "sector": "Mining and Quarrying", "size": 0.6 },
          { "sector": "Manufacturing", "size": 23.2 },
          { "sector": "Electricity and Water", "size": 2.2 },
          { "sector": "Construction", "size": 4.5 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 14.6 },
          { "sector": "Transport and Communication", "size": 9.3 },
          { "sector": "Finance, real estate and business services", "size": 22.5 }],
        "1996": [
          { "sector": "Agriculture", "size": 6.4 },
          { "sector": "Mining and Quarrying", "size": 0.5 },
          { "sector": "Manufacturing", "size": 22.4 },
          { "sector": "Electricity and Water", "size": 2 },
          { "sector": "Construction", "size": 4.2 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 14.8 },
          { "sector": "Transport and Communication", "size": 9.7 },
          { "sector": "Finance, real estate and business services", "size": 22 }],
        "1997": [
          { "sector": "Agriculture", "size": 6.1 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 20.9 },
          { "sector": "Electricity and Water", "size": 1.8 },
          { "sector": "Construction", "size": 4.2 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 13.7 },
          { "sector": "Transport and Communication", "size": 9.4 },
          { "sector": "Finance, real estate and business services", "size": 22.1 }],
        "1998": [
          { "sector": "Agriculture", "size": 6.2 },
          { "sector": "Mining and Quarrying", "size": 0.3 },
          { "sector": "Manufacturing", "size": 21.4 },
          { "sector": "Electricity and Water", "size": 1.9 },
          { "sector": "Construction", "size": 4.2 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 14.5 },
          { "sector": "Transport and Communication", "size": 10.6 },
          { "sector": "Finance, real estate and business services", "size": 23 }],
        "1999": [
          { "sector": "Agriculture", "size": 5.7 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 20 },
          { "sector": "Electricity and Water", "size": 1.8 },
          { "sector": "Construction", "size": 4.4 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 15.2 },
          { "sector": "Transport and Communication", "size": 10.5 },
          { "sector": "Finance, real estate and business services", "size": 24.7 }],
        "2000": [
          { "sector": "Agriculture", "size": 5.1 },
          { "sector": "Mining and Quarrying", "size": 0.3 },
          { "sector": "Manufacturing", "size": 20.4 },
          { "sector": "Electricity and Water", "size": 1.7 },
          { "sector": "Construction", "size": 4 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 16.3 },
          { "sector": "Transport and Communication", "size": 10.7 },
          { "sector": "Finance, real estate and business services", "size": 24.6 }],
        "2001": [
          { "sector": "Agriculture", "size": 5.5 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 20.3 },
          { "sector": "Electricity and Water", "size": 1.6 },
          { "sector": "Construction", "size": 3.1 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 16.3 },
          { "sector": "Transport and Communication", "size": 10.7 },
          { "sector": "Finance, real estate and business services", "size": 25.8 }],
        "2002": [
          { "sector": "Agriculture", "size": 5.7 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 20.5 },
          { "sector": "Electricity and Water", "size": 1.6 },
          { "sector": "Construction", "size": 3.6 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 16.1 },
          { "sector": "Transport and Communication", "size": 10.7 },
          { "sector": "Finance, real estate and business services", "size": 26 }],
        "2003": [
          { "sector": "Agriculture", "size": 4.9 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 19.4 },
          { "sector": "Electricity and Water", "size": 1.5 },
          { "sector": "Construction", "size": 3.3 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 16.2 },
          { "sector": "Transport and Communication", "size": 11 },
          { "sector": "Finance, real estate and business services", "size": 27.5 }],
        "2004": [
          { "sector": "Agriculture", "size": 4.7 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 18.4 },
          { "sector": "Electricity and Water", "size": 1.4 },
          { "sector": "Construction", "size": 3.3 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 16.9 },
          { "sector": "Transport and Communication", "size": 10.6 },
          { "sector": "Finance, real estate and business services", "size": 28.1 }],
        "2005": [
          { "sector": "Agriculture", "size": 4.3 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 18.1 },
          { "sector": "Electricity and Water", "size": 1.4 },
          { "sector": "Construction", "size": 3.9 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 15.7 },
          { "sector": "Transport and Communication", "size": 10.6 },
          { "sector": "Finance, real estate and business services", "size": 29.1 }],
        "2006": [
          { "sector": "Agriculture", "size": 4 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 16.5 },
          { "sector": "Electricity and Water", "size": 1.3 },
          { "sector": "Construction", "size": 3.7 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 14.2 },
          { "sector": "Transport and Communication", "size": 12.1 },
          { "sector": "Finance, real estate and business services", "size": 29.1 }],
        "2007": [
          { "sector": "Agriculture", "size": 4.7 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 16.2 },
          { "sector": "Electricity and Water", "size": 1.2 },
          { "sector": "Construction", "size": 4.1 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 15.6 },
          { "sector": "Transport and Communication", "size": 11.2 },
          { "sector": "Finance, real estate and business services", "size": 30.4 }],
        "2008": [
          { "sector": "Agriculture", "size": 4.9 },
          { "sector": "Mining and Quarrying", "size": 0.3 },
          { "sector": "Manufacturing", "size": 17.2 },
          { "sector": "Electricity and Water", "size": 1.4 },
          { "sector": "Construction", "size": 5.1 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 15.4 },
          { "sector": "Transport and Communication", "size": 11.1 },
          { "sector": "Finance, real estate and business services", "size": 28.4 }],
        "2009": [
          { "sector": "Agriculture", "size": 4.7 },
          { "sector": "Mining and Quarrying", "size": 0.3 },
          { "sector": "Manufacturing", "size": 16.4 },
          { "sector": "Electricity and Water", "size": 1.9 },
          { "sector": "Construction", "size": 4.9 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 15.5 },
          { "sector": "Transport and Communication", "size": 10.9 },
          { "sector": "Finance, real estate and business services", "size": 27.9 }],
        "2010": [
          { "sector": "Agriculture", "size": 4.2 },
          { "sector": "Mining and Quarrying", "size": 0.3 },
          { "sector": "Manufacturing", "size": 16.2 },
          { "sector": "Electricity and Water", "size": 2.2 },
          { "sector": "Construction", "size": 4.3 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 15.7 },
          { "sector": "Transport and Communication", "size": 10.2 },
          { "sector": "Finance, real estate and business services", "size": 28.8 }],
        "2011": [
          { "sector": "Agriculture", "size": 4.1 },
          { "sector": "Mining and Quarrying", "size": 0.3 },
          { "sector": "Manufacturing", "size": 14.9 },
          { "sector": "Electricity and Water", "size": 2.3 },
          { "sector": "Construction", "size": 5 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 17.3 },
          { "sector": "Transport and Communication", "size": 10.2 },
          { "sector": "Finance, real estate and business services", "size": 27.2 }],
        "2012": [
          { "sector": "Agriculture", "size": 3.8 },
          { "sector": "Mining and Quarrying", "size": 0.3 },
          { "sector": "Manufacturing", "size": 14.9 },
          { "sector": "Electricity and Water", "size": 2.6 },
          { "sector": "Construction", "size": 5.1 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 15.8 },
          { "sector": "Transport and Communication", "size": 10.7 },
          { "sector": "Finance, real estate and business services", "size": 28 }],
        "2013": [
          { "sector": "Agriculture", "size": 3.7 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 14.9 },
          { "sector": "Electricity and Water", "size": 2.7 },
          { "sector": "Construction", "size": 5.7 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 16.5 },
          { "sector": "Transport and Communication", "size": 10.5 },
          { "sector": "Finance, real estate and business services", "size": 26.6 }],
        "2014": [
          { "sector": "Agriculture", "size": 3.9 },
          { "sector": "Mining and Quarrying", "size": 0.2 },
          { "sector": "Manufacturing", "size": 14.5 },
          { "sector": "Electricity and Water", "size": 2.7 },
          { "sector": "Construction", "size": 5.6 },
          { "sector": "Trade (Wholesale, Retail, Motor)", "size": 16.6 },
          { "sector": "Transport and Communication", "size": 10.5 },
          { "sector": "Finance, real estate and business services", "size": 26.5 }]
      };

      // Create chart instance
      var chart = am4core.create("chartdiv", am4charts.PieChart);

      // Add data
      chart.data = [
        { "sector": "Agriculture", "size": 6.6 },
        { "sector": "Mining and Quarrying", "size": 0.6 },
        { "sector": "Manufacturing", "size": 23.2 },
        { "sector": "Electricity and Water", "size": 2.2 },
        { "sector": "Construction", "size": 4.5 },
        { "sector": "Trade (Wholesale, Retail, Motor)", "size": 14.6 },
        { "sector": "Transport and Communication", "size": 9.3 },
        { "sector": "Finance, real estate and business services", "size": 22.5 }
      ];

      // Add label
      chart.innerRadius = 100;
      var label = chart.seriesContainer.createChild(am4core.Label);
      label.text = "1995";
      label.horizontalCenter = "middle";
      label.verticalCenter = "middle";
      label.fontSize = 50;

      // Add and configure Series
      var pieSeries = chart.series.push(new am4charts.PieSeries());
      pieSeries.dataFields.value = "size";
      pieSeries.dataFields.category = "sector";

      // Animate chart data
      var currentYear = 1995;
      function getCurrentData() {
        label.text = currentYear;
        var data = chartData[currentYear];
        currentYear++;
        if (currentYear > 2014)
          currentYear = 1995;
        return data;
      }

      function loop() {
        //chart.allLabels[0].text = currentYear;
        var data = getCurrentData();
        for (var i = 0; i < data.length; i++) {
          chart.data[i].size = data[i].size;
        }
        chart.invalidateRawData();
        chart.setTimeout(loop, 4000);
      }

      loop();

    }); // end am4core.ready()
  </script>

</head>

<body>


  <div class="bs_wrap">
    <nav id="nav">
      <ul id="gnb">
        <li><a href="#">m1</a></li>
        <li><a href="#">m2</a></li>
        <li><a href="#">m3</a></li>
      </ul>
      <h3>MY금융</h3>
      <span class="bell"><img src="/img/bell.png" alt="알림설정"></span>

      <ul class="sec_budget">
        <li class="active">가계부</li>
        <li>예산</li>
      </ul>
    </nav>

    <div class="cont">
      <div class="data pd">
        <div class="list">
          <button class="list_li active" onclick="openTab(event,'tab1')">내역</button>
          <button class="list_li" onclick="openTab(event,'tab2')">달력</button>
          <button class="list_li" onclick="openTab(event,'tab3')">통계</button>
          <button class="list_li" onclick="openTab(event,'tab4')">예산</button>
        </div>
        <div id="tab1" class="state" style="display: inherit">
          <div class="list_checkbox">
            <dl>
              <dt>
                <div class="inp_chk sign_in_status">
                  <input type="checkbox" id="income" class="inp_radio" name="income" style="display: none;">
                  <label for="income" class="lab_g" style="line-height: 1.2">
                    <span class="img_top ico_check"></span>
                    <span class="txt_lab">수입</span>
                  </label>
                </div>
              </dt>
              <dd>3,700,000원</dd>
            </dl>
            <dl>
              <dt>
                <div class="inp_chk sign_in_status">
                  <input type="checkbox" id="expense" class="inp_radio" name="expense" style="display: none;">
                  <label for="expense" class="lab_g" style="line-height: 1.2">
                    <span class="img_top ico_check"></span>
                    <span class="txt_lab">지출</span>
                  </label>
                </div>
              </dt>
              <dd>800,000원</dd>
            </dl>
            <dl>
              <dt>
                <div class="inp_chk sign_in_status">
                  <input type="checkbox" id="transfer" class="inp_radio" name="transfer" style="display: none;">
                  <label for="transfer" class="lab_g" style="line-height: 1.2">
                    <span class="img_top ico_check"></span>
                    <span class="txt_lab">이체</span>
                  </label>
                </div>
              </dt>
              <dd>12건</dd>
            </dl>
          </div>
          <div class="money_flow">
            <div class="flow_top">
              <h4><strong>6월 25일</strong> <span>금</span></h4>
              <p class="sum_cash">+3,550원 <span>-12,000원</span> <em>img</em> <span>0건</span></p>
            </div>
            <ul class="depo money_book">
              <li>
                <div>
                  <span>디저트</span>
                </div>
                <div>
                  <dl>
                    <dt>디초콜릿카페</dt>
                    <dd>하나카드</dd>
                  </dl>
                </div>
                <div>
                  <strong>-5,400원</strong>
                </div>
              </li>
              <li>
                <div>
                  <span>카페</span>
                </div>
                <div>
                  <dl>
                    <dt>스타벅스</dt>
                    <dd>우리카드</dd>
                  </dl>
                </div>
                <div>
                  <strong>-6,800원</strong>
                </div>
              </li>
            </ul>

            <div class="flow_top">
              <h4><strong>5월 10일</strong> <span>토</span></h4>
              <p class="sum_cash">+3,550원 <span>-12,000원</span> <em>img</em> <span>0건</span></p>
            </div>
            <ul class="depo money_book">
              <li>
                <div>
                  <span>디저트</span>
                </div>
                <div>
                  <dl>
                    <dt>디초콜릿카페</dt>
                    <dd>하나카드</dd>
                  </dl>
                </div>
                <div>
                  <strong>-5,400원</strong>
                </div>
              </li>
              <li>
                <div>
                  <span>카페</span>
                </div>
                <div>
                  <dl>
                    <dt>스타벅스</dt>
                    <dd>우리카드</dd>
                  </dl>
                </div>
                <div>
                  <strong>-6,800원</strong>
                </div>
              </li>
            </ul>

          </div>
        </div>

        <div id="tab2" class="state cal_state">
          <div class="cal_top">
            <a href="#" id="movePrevMonth"><span id="prevMonth" class="cal_tit">&lt; </span></a>
            <span id="cal_top_year"></span>
            <span id="cal_top_month"></span>
            <a href="#" id="moveNextMonth"><span id="nextMonth" class="cal_tit"> &gt;</span></a>
          </div>
          <div id="cal_tab" class="cal"></div>
        </div>

        <div id="tab3" class="state">
          <div id="chartdiv"></div>
        </div>

        <div id="tab4" class="state" style="display: initial;">
          <div class="sum_asset">
            <span>사용자의 순자산</span>
            <strong>400,000,000원</strong>
            <a href="#" class="add_asset">자산 추가</a>
          </div>

          <div class="score">
            <h4 class="bold">신용점수</h4>
            <strong><span>1등급</span>(999점) &gt;</strong>
          </div>

          <div class="cash_flow">
            <strong>계좌/현금</strong>
            <strong>12,864,774원</strong>
          </div>

          <div class="money_flow">
            <div class="flow_top">
              <h4>입출금</h4>
              <p class="sum_cash">4,550,000원</p>
            </div>
            <ul class="depo">
              <li>
                <div>
                  <p>월급통장<span>계좌 1213-4532-2343</span></p>
                </div>
                <div>
                  <strong>3,400,212원 <a href="#">조회하기 &gt;</a></strong>
                </div>
              </li>
              <li>
                <div>
                  <p>월급통장<span>계좌 1213-4532-2343</span></p>
                </div>
                <div>
                  <strong>3,400,212원 <a href="#">조회하기 &gt;</a></strong>
                </div>
              </li>
            </ul>

            <div class="flow_top">
              <h4>적금</h4>
              <p class="sum_cash">2,550,000원</p>
            </div>
            <ul class="depo">
              <li>
                <div>
                  <p>적금통장<span>계좌 1003-4532-2343</span></p>
                </div>
                <div>
                  <strong>1,400,212원 <a href="#">조회하기 &gt;</a></strong>
                </div>
              </li>
              <li>
                <div>
                  <p>적금통장<span>계좌 5613-4532-2343</span></p>
                </div>
                <div>
                  <strong>1,100,212원 <a href="#">조회하기 &gt;</a></strong>
                </div>
              </li>
            </ul>
          </div>
        </div>

      </div>
    </div>
    <!--cont-->
    <div id="footer">
      <ul class="footer_list">
        <li><a href="javascript:void(0);"><img src="./img/money_ico.svg" alt="MY금융"><span>MY금융</span></a></li>
        <li><a href="javascript:void(0);"><img src="./img/book_ico.svg" alt="가계부"><span>가계부</span></a></li>
        <li><a href="javascript:void(0);"><img src="./img/money_ico.svg" alt="금융비서"><span>금융비서</span></a></li>
        <li><a href="javascript:void(0);"><img src="./img/book_ico.svg" alt="재테크"><span>재테크</span></a></li>
      </ul>
    </div>
  </div>

  <script type="text/javascript">
    var today = null;
    var year = null;
    var month = null;
    var firstDay = null;
    var lastDay = null;
    var $tdDay = null;
    var $tdSche = null;
    var jsonData = null;
    $(document).ready(function () {
      drawCalendar();
      initDate();
      drawDays();
      drawSche();
      $("#movePrevMonth").on("click", function () { movePrevMonth(); });
      $("#moveNextMonth").on("click", function () { moveNextMonth(); });
    });

    //Calendar 그리기
    function drawCalendar() {
      var setTableHTML = "";
      setTableHTML += '<table class="calendar">';
      setTableHTML += '<tr><th>SUN</th><th>MON</th><th>TUE</th><th>WED</th><th>THU</th><th>FRI</th><th>SAT</th></tr>';
      for (var i = 0; i < 6; i++) {
        setTableHTML += '<tr height="100">';
        for (var j = 0; j < 7; j++) {
          setTableHTML += '<td style="text-overflow:ellipsis;overflow:hidden;white-space:nowrap">';
          setTableHTML += '    <div class="cal-day"></div>';
          setTableHTML += '    <div class="cal-schedule"></div>';
          setTableHTML += '</td>';
        }
        setTableHTML += '</tr>';
      }
      setTableHTML += '</table>';
      $("#cal_tab").html(setTableHTML);
    }

    //날짜 초기화
    function initDate() {
      $tdDay = $("td div.cal-day")
      $tdSche = $("td div.cal-schedule")
      dayCount = 0;
      today = new Date();
      year = today.getFullYear();
      month = today.getMonth() + 1;
      if (month < 10) { month = "0" + month; }
      firstDay = new Date(year, month - 1, 1);
      lastDay = new Date(year, month, 0);
    }

    //calendar 날짜표시
    function drawDays() {
      $("#cal_top_year").text(year);
      $("#cal_top_month").text(month);
      for (var i = firstDay.getDay(); i < firstDay.getDay() + lastDay.getDate(); i++) {
        $tdDay.eq(i).text(++dayCount);
      }
      for (var i = 0; i < 42; i += 7) {
        $tdDay.eq(i).css("color", "red");
      }
      for (var i = 6; i < 42; i += 7) {
        $tdDay.eq(i).css("color", "blue");
      }
    }

    //calendar 월 이동
    function movePrevMonth() {
      month--;
      if (month <= 0) {
        month = 12;
        year--;
      }
      if (month < 10) {
        month = String("0" + month);
      }
      getNewInfo();
    }

    function moveNextMonth() {
      month++;
      if (month > 12) {
        month = 1;
        year++;
      }
      if (month < 10) {
        month = String("0" + month);
      }
      getNewInfo();
    }

    //정보갱신
    function getNewInfo() {
      for (var i = 0; i < 42; i++) {
        $tdDay.eq(i).text("");
        $tdSche.eq(i).text("");
      }
      dayCount = 0;
      firstDay = new Date(year, month - 1, 1);
      lastDay = new Date(year, month, 0);
      drawDays();
      drawSche();
    }

    //2019-08-27 추가본

    //데이터 등록
    function setData() {
      jsonData =
        {
          "2019": {
            "07": {
              "17": "제헌절"
            }
            , "08": {
              "7": "칠석"
              , "15": "광복절"
              , "23": "처서"
            }
            , "09": {
              "13": "추석"
              , "23": "추분"
            }
          }
        }
    }

    //스케줄 그리기
    function drawSche() {
      setData();
      var dateMatch = null;
      for (var i = firstDay.getDay(); i < firstDay.getDay() + lastDay.getDate(); i++) {
        var txt = "";
        txt = jsonData[year];
        if (txt) {
          txt = jsonData[year][month];
          if (txt) {
            txt = jsonData[year][month][i];
            dateMatch = firstDay.getDay() + i - 1;
            $tdSche.eq(dateMatch).text(txt);
          }
        }
      }
    }
  </script>

</body>

</html>